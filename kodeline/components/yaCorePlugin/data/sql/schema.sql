CREATE TABLE fx_shop_filter (id BIGSERIAL, label VARCHAR(255), title TEXT NOT NULL, annotation TEXT, detail TEXT, note TEXT, is_active SMALLINT DEFAULT 1 NOT NULL, is_params SMALLINT DEFAULT 1 NOT NULL, is_category SMALLINT DEFAULT 0 NOT NULL, is_limit SMALLINT DEFAULT 0 NOT NULL, begin_limit INT, finish_limit INT, root_id BIGINT NOT NULL, parent_id INT DEFAULT NULL, path TEXT DEFAULT NULL, level INT DEFAULT 0 NOT NULL, sibling INT DEFAULT 1 NOT NULL, children INT DEFAULT 0 NOT NULL, is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, is_restricted SMALLINT DEFAULT 0 NOT NULL, is_reviewable SMALLINT DEFAULT 1 NOT NULL, is_reviewed SMALLINT DEFAULT 0 NOT NULL, is_watchable SMALLINT DEFAULT 1 NOT NULL, has_watched BIGINT DEFAULT 0 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, slug VARCHAR(255) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE fx_shop_filter_group (id BIGSERIAL, filter_id BIGINT NOT NULL, component_id BIGINT NOT NULL, parameter_id BIGINT NOT NULL, position BIGINT DEFAULT 0 NOT NULL, PRIMARY KEY(id));
CREATE TABLE fx_shop_filter_having (id BIGSERIAL, filter_id BIGINT NOT NULL, component_id BIGINT NOT NULL, parameter_id BIGINT NOT NULL, condition_name VARCHAR(255), is_and SMALLINT DEFAULT 1 NOT NULL, value_min TEXT, value_max TEXT, value_eq TEXT, value_ne TEXT, value_less TEXT, value_greater TEXT, PRIMARY KEY(id));
CREATE TABLE fx_shop_filter_order (id BIGSERIAL, filter_id BIGINT NOT NULL, component_id BIGINT NOT NULL, parameter_id BIGINT NOT NULL, is_desc SMALLINT DEFAULT 1 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, PRIMARY KEY(id));
CREATE TABLE fx_shop_filter_rule (id BIGSERIAL, filter_id BIGINT NOT NULL, component_id BIGINT NOT NULL, parameter_id BIGINT NOT NULL, condition_name VARCHAR(255), is_and SMALLINT DEFAULT 1 NOT NULL, value_min TEXT, value_max TEXT, value_eq TEXT, value_ne TEXT, value_less TEXT, value_greater TEXT, PRIMARY KEY(id));
CREATE TABLE fx_shop_item (id BIGSERIAL, ident VARCHAR(255), label VARCHAR(255), title TEXT NOT NULL, annotation TEXT, detail TEXT, note TEXT, is_active SMALLINT DEFAULT 1 NOT NULL, is_category SMALLINT DEFAULT 0 NOT NULL, root_id BIGINT NOT NULL, parent_id INT DEFAULT NULL, path TEXT DEFAULT NULL, level INT DEFAULT 0 NOT NULL, sibling INT DEFAULT 1 NOT NULL, children INT DEFAULT 0 NOT NULL, is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, is_restricted SMALLINT DEFAULT 0 NOT NULL, is_reviewable SMALLINT DEFAULT 1 NOT NULL, is_reviewed SMALLINT DEFAULT 0 NOT NULL, is_watchable SMALLINT DEFAULT 1 NOT NULL, has_watched BIGINT DEFAULT 0 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, slug VARCHAR(255) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE fx_shop_list (id BIGSERIAL, ident VARCHAR(255), label VARCHAR(255), title TEXT NOT NULL, annotation TEXT, detail TEXT, note TEXT, is_active SMALLINT DEFAULT 1 NOT NULL, is_category SMALLINT DEFAULT 0 NOT NULL, root_id BIGINT NOT NULL, parent_id INT DEFAULT NULL, path TEXT DEFAULT NULL, level INT DEFAULT 0 NOT NULL, sibling INT DEFAULT 1 NOT NULL, children INT DEFAULT 0 NOT NULL, is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, is_restricted SMALLINT DEFAULT 0 NOT NULL, is_reviewable SMALLINT DEFAULT 1 NOT NULL, is_reviewed SMALLINT DEFAULT 0 NOT NULL, is_watchable SMALLINT DEFAULT 1 NOT NULL, has_watched BIGINT DEFAULT 0 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, slug VARCHAR(255) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE items_words_ref (product_id BIGINT NOT NULL, word_id BIGINT NOT NULL, PRIMARY KEY(product_id, word_id));
CREATE TABLE word_template (id BIGSERIAL, title TEXT NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_behavior_component (id BIGSERIAL, name VARCHAR(255) NOT NULL UNIQUE, PRIMARY KEY(id));
CREATE TABLE j_commentable_record (id BIGSERIAL, component_id BIGINT NOT NULL, record_id BIGINT NOT NULL, sender_id BIGINT NOT NULL, title TEXT, body TEXT NOT NULL, is_active SMALLINT DEFAULT 1 NOT NULL, is_published SMALLINT DEFAULT 0 NOT NULL, parent_id INT DEFAULT NULL, path TEXT DEFAULT NULL, level INT DEFAULT 0 NOT NULL, sibling INT DEFAULT 1 NOT NULL, children INT DEFAULT 0 NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, credentials TEXT DEFAULT NULL NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, deleted_at TIMESTAMP, is_restricted SMALLINT DEFAULT 0 NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_element (id BIGSERIAL, title TEXT NOT NULL, annotation TEXT, detail TEXT, note TEXT, is_active SMALLINT DEFAULT 1 NOT NULL, root_id BIGINT NOT NULL, parent_id INT DEFAULT NULL, path TEXT DEFAULT NULL, level INT DEFAULT 0 NOT NULL, sibling INT DEFAULT 1 NOT NULL, children INT DEFAULT 0 NOT NULL, is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, is_restricted SMALLINT DEFAULT 0 NOT NULL, is_reviewable SMALLINT DEFAULT 1 NOT NULL, is_reviewed SMALLINT DEFAULT 0 NOT NULL, is_watchable SMALLINT DEFAULT 1 NOT NULL, has_watched BIGINT DEFAULT 0 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, slug VARCHAR(255) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_file (id BIGSERIAL, directory_id BIGINT, mime_type_id BIGINT NOT NULL, creator_id BIGINT, path TEXT, fname TEXT NOT NULL, original_name TEXT NOT NULL, size BIGINT DEFAULT 0 NOT NULL, extension VARCHAR(50), title TEXT, definition TEXT, flabel TEXT, fkey VARCHAR(255), url TEXT, meta TEXT, is_required SMALLINT DEFAULT 0 NOT NULL, is_active SMALLINT DEFAULT 1 NOT NULL, typeof VARCHAR(100) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, is_watchable SMALLINT DEFAULT 1 NOT NULL, has_watched BIGINT DEFAULT 0 NOT NULL, is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_file_attachment (component_id BIGINT NOT NULL, record_id BIGINT NOT NULL, file_id BIGINT NOT NULL, PRIMARY KEY(component_id, record_id, file_id));
CREATE TABLE j_file_directory (id BIGSERIAL, title TEXT NOT NULL, is_active BOOLEAN DEFAULT 'true' NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, parent_id INT DEFAULT NULL, path TEXT DEFAULT NULL, level INT DEFAULT 0 NOT NULL, sibling INT DEFAULT 1 NOT NULL, children INT DEFAULT 0 NOT NULL, ver INT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_file_mime_type (id BIGSERIAL, name TEXT NOT NULL, title TEXT, PRIMARY KEY(id));
CREATE TABLE j_file_mime_type_group (id BIGSERIAL, title TEXT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_file_mime_type_group_ref (type_id BIGINT NOT NULL, group_id BIGINT NOT NULL, PRIMARY KEY(type_id, group_id));
CREATE TABLE j_ignoreable_record (component_id BIGINT NOT NULL, record_id BIGINT NOT NULL, ignored_component_id BIGINT NOT NULL, ignored_record_id BIGINT NOT NULL, note TEXT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(component_id, record_id, ignored_component_id, ignored_record_id));
CREATE TABLE j_joined_record (request_component_id BIGINT NOT NULL, request_record_id BIGINT NOT NULL, response_component_id BIGINT NOT NULL, response_record_id BIGINT NOT NULL, response_success SMALLINT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(request_component_id, request_record_id, response_component_id, response_record_id, response_success));
CREATE TABLE j_parameterable_date_value (id BIGSERIAL, component_id BIGINT NOT NULL, object_id BIGINT NOT NULL, parameter_id BIGINT NOT NULL, value DATE, is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, is_restricted SMALLINT DEFAULT 0 NOT NULL, is_watchable SMALLINT DEFAULT 1 NOT NULL, has_watched BIGINT DEFAULT 0 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_parameterable_decimal_value (id BIGSERIAL, component_id BIGINT NOT NULL, object_id BIGINT NOT NULL, parameter_id BIGINT NOT NULL, value NUMERIC(65,25), is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, is_restricted SMALLINT DEFAULT 0 NOT NULL, is_watchable SMALLINT DEFAULT 1 NOT NULL, has_watched BIGINT DEFAULT 0 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_parameterable_integer_value (id BIGSERIAL, component_id BIGINT NOT NULL, object_id BIGINT NOT NULL, parameter_id BIGINT NOT NULL, value BIGINT, is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, is_restricted SMALLINT DEFAULT 0 NOT NULL, is_watchable SMALLINT DEFAULT 1 NOT NULL, has_watched BIGINT DEFAULT 0 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_parameterable_option_translation (id BIGINT NOT NULL, value VARCHAR(255) NOT NULL, lang CHAR(2) NOT NULL, PRIMARY KEY(id, lang));
CREATE TABLE j_parameterable_option (id BIGSERIAL, parameter_id BIGINT NOT NULL, name VARCHAR(100) NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_parameterable_schema_translation (id BIGINT NOT NULL, hint TEXT, title TEXT, lang CHAR(2) NOT NULL, PRIMARY KEY(id, lang));
CREATE TABLE j_parameterable_schema (id BIGSERIAL, component_id BIGINT NOT NULL, name VARCHAR(255) NOT NULL, belong VARCHAR(255), out_format VARCHAR(255), type VARCHAR(255) NOT NULL, length INT DEFAULT 0 NOT NULL, scale INT DEFAULT 0 NOT NULL, is_null SMALLINT DEFAULT 1 NOT NULL, default_value TEXT, is_hidden SMALLINT DEFAULT 0 NOT NULL, is_group SMALLINT DEFAULT 0 NOT NULL, is_many SMALLINT DEFAULT 0 NOT NULL, is_dynamic SMALLINT DEFAULT 0 NOT NULL, is_require SMALLINT DEFAULT 0 NOT NULL, parent_id INT DEFAULT NULL, path TEXT DEFAULT NULL, level INT DEFAULT 0 NOT NULL, sibling INT DEFAULT 1 NOT NULL, children INT DEFAULT 0 NOT NULL, typeof VARCHAR(100) NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_parameterable_string_value_translation (id BIGINT NOT NULL, value TEXT, lang CHAR(2) NOT NULL, PRIMARY KEY(id, lang));
CREATE TABLE j_parameterable_string_value (id BIGSERIAL, component_id BIGINT NOT NULL, object_id BIGINT NOT NULL, parameter_id BIGINT NOT NULL, is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, is_restricted SMALLINT DEFAULT 0 NOT NULL, is_watchable SMALLINT DEFAULT 1 NOT NULL, has_watched BIGINT DEFAULT 0 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_parameterable_time_value (id BIGSERIAL, component_id BIGINT NOT NULL, object_id BIGINT NOT NULL, parameter_id BIGINT NOT NULL, value TIME, is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, is_restricted SMALLINT DEFAULT 0 NOT NULL, is_watchable SMALLINT DEFAULT 1 NOT NULL, has_watched BIGINT DEFAULT 0 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_parameterable_timestamp_value (id BIGSERIAL, component_id BIGINT NOT NULL, object_id BIGINT NOT NULL, parameter_id BIGINT NOT NULL, value TIMESTAMP, is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, is_restricted SMALLINT DEFAULT 0 NOT NULL, is_watchable SMALLINT DEFAULT 1 NOT NULL, has_watched BIGINT DEFAULT 0 NOT NULL, position BIGINT DEFAULT 0 NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_rateable_record (id BIGSERIAL, component_id BIGINT NOT NULL, record_id BIGINT, value NUMERIC(14,2) DEFAULT 0 NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, PRIMARY KEY(id, component_id));
CREATE TABLE j_restrictable_reason (id BIGSERIAL, title VARCHAR(255), detail TEXT NOT NULL, duration INT, PRIMARY KEY(id));
CREATE TABLE j_restrictable_record (id BIGSERIAL, component_id BIGINT NOT NULL, record_id BIGINT NOT NULL, note TEXT, is_expired SMALLINT DEFAULT 0 NOT NULL, expire_at TIMESTAMP NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_restrictable_record_reasons (restrict_id BIGINT NOT NULL, reason_id BIGINT NOT NULL, PRIMARY KEY(restrict_id, reason_id));
CREATE TABLE j_reviewable_record (id BIGSERIAL, component_id BIGINT NOT NULL, record_id BIGINT NOT NULL, sender_id BIGINT NOT NULL, title TEXT, body TEXT NOT NULL, is_positive SMALLINT DEFAULT 1 NOT NULL, is_active SMALLINT DEFAULT 1 NOT NULL, is_published SMALLINT DEFAULT 0 NOT NULL, credentials TEXT DEFAULT NULL NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, deleted_at TIMESTAMP, is_commentable SMALLINT DEFAULT 1 NOT NULL, is_commented SMALLINT DEFAULT 0 NOT NULL, PRIMARY KEY(id, component_id));
CREATE TABLE j_scheduleable_record (id BIGSERIAL, component_id BIGINT NOT NULL, record_id BIGINT NOT NULL, date TIMESTAMP NOT NULL, time TIMESTAMP, PRIMARY KEY(id));
CREATE TABLE j_scheduled_template_record (id BIGSERIAL, component_id BIGINT NOT NULL, record_id BIGINT NOT NULL, month SMALLINT NOT NULL, is_weekly SMALLINT DEFAULT 1 NOT NULL, day SMALLINT NOT NULL, time TIMESTAMP, PRIMARY KEY(id));
CREATE TABLE j_signable_record (id BIGSERIAL, component_id BIGINT NOT NULL, record_id BIGINT, is_confirmed SMALLINT DEFAULT 0 NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id, component_id));
CREATE TABLE j_taggable_record (id BIGSERIAL, component_id BIGINT NOT NULL, record_id BIGINT NOT NULL, tag_id BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_taggable_tag (id BIGSERIAL, title VARCHAR(255) NOT NULL UNIQUE, is_triple SMALLINT DEFAULT 0 NOT NULL, triple_namespace VARCHAR(100), triple_key VARCHAR(100), triple_value VARCHAR(100), created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, is_rateable SMALLINT DEFAULT 1 NOT NULL, is_rated SMALLINT DEFAULT 0 NOT NULL, rate_value NUMERIC(10,5) DEFAULT 0 NOT NULL, created_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE j_watchable_record (component_id BIGINT NOT NULL, record_id BIGINT NOT NULL, watched_component_id BIGINT NOT NULL, watched_record_id BIGINT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(component_id, record_id, watched_component_id, watched_record_id));
CREATE TABLE j_watchdogable_revisions (id BIGSERIAL, component_id BIGINT NOT NULL, record_id BIGINT NOT NULL, updater_id BIGINT NOT NULL, column_name VARCHAR(255) NOT NULL, column_value_old TEXT NOT NULL, column_value_new TEXT NOT NULL, column_diff TEXT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_event (id BIGSERIAL, name VARCHAR(255) NOT NULL UNIQUE, layer VARCHAR(255) NOT NULL, title TEXT, annotation TEXT, is_active SMALLINT DEFAULT 1 NOT NULL, root_id BIGINT NOT NULL, parent_id INT DEFAULT NULL, path TEXT DEFAULT NULL, level INT DEFAULT 0 NOT NULL, sibling INT DEFAULT 1 NOT NULL, children INT DEFAULT 0 NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_event_subscriber (id BIGSERIAL, method VARCHAR(255) NOT NULL, class VARCHAR(255), path TEXT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_event_subscribers (event_id BIGINT NOT NULL, subscriber_id BIGINT NOT NULL, params TEXT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(event_id, subscriber_id));
CREATE TABLE kl_layout (id BIGSERIAL, title TEXT NOT NULL, annotation TEXT, width NUMERIC(10,8) DEFAULT 0, height NUMERIC(10,8) DEFAULT 0, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_layout_script (id BIGSERIAL, title TEXT, annotation TEXT, path TEXT DEFAULT NULL, type VARCHAR(255) DEFAULT 'text/javascript' NOT NULL, content TEXT, group_name VARCHAR(255), is_async SMALLINT DEFAULT 0 NOT NULL, root_id BIGINT NOT NULL, parent_id INT DEFAULT NULL, level INT DEFAULT 0 NOT NULL, sibling INT DEFAULT 1 NOT NULL, children INT DEFAULT 0 NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, position BIGINT DEFAULT 0 NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_layout_scripts (layout_id BIGINT NOT NULL, script_id BIGINT NOT NULL, PRIMARY KEY(layout_id, script_id));
CREATE TABLE kl_layout_style (id BIGSERIAL, title TEXT, annotation TEXT, path TEXT, type VARCHAR(255) DEFAULT 'text/css' NOT NULL, content TEXT, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, position BIGINT DEFAULT 0 NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_layout_styles (layout_id BIGINT NOT NULL, style_id BIGINT NOT NULL, PRIMARY KEY(layout_id, style_id));
CREATE TABLE kl_permission (id BIGSERIAL, name VARCHAR(255) NOT NULL UNIQUE, description TEXT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_site (id BIGSERIAL, name TEXT NOT NULL, annotation TEXT, is_active SMALLINT DEFAULT 1 NOT NULL, root_id BIGINT NOT NULL, parent_id INT DEFAULT NULL, path TEXT DEFAULT NULL, level INT DEFAULT 0 NOT NULL, sibling INT DEFAULT 1 NOT NULL, children INT DEFAULT 0 NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_user (id BIGSERIAL, username VARCHAR(255) NOT NULL UNIQUE, algorithm VARCHAR(25) DEFAULT 'sha1' NOT NULL, salt VARCHAR(255), password VARCHAR(255), is_active SMALLINT DEFAULT 1 NOT NULL, is_super_admin SMALLINT DEFAULT 1 NOT NULL, last_login TIMESTAMP, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_user_activate_key (id BIGSERIAL, user_id BIGINT NOT NULL, key_value VARCHAR(255) NOT NULL, expire_time BIGINT DEFAULT 86400 NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_user_group (id BIGSERIAL, name VARCHAR(255) NOT NULL UNIQUE, description TEXT, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_user_group_permission (group_id BIGINT NOT NULL, permission_id BIGINT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(group_id, permission_id));
CREATE TABLE kl_user_password_key (id BIGSERIAL, user_id BIGINT NOT NULL, key_value VARCHAR(255) NOT NULL, expire_time BIGINT DEFAULT 86400 NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_user_permission (user_id BIGINT NOT NULL, permission_id BIGINT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(user_id, permission_id));
CREATE TABLE kl_user_remember_key (id BIGSERIAL, user_id BIGINT NOT NULL, key_value VARCHAR(255) NOT NULL, ip_address VARCHAR(50) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_user_token (id BIGSERIAL, user_id BIGINT NOT NULL, name VARCHAR(127) NOT NULL, token_key TEXT NOT NULL, token_secret TEXT NOT NULL, expire BIGINT NOT NULL, params TEXT NOT NULL, identifier VARCHAR(255) NOT NULL, status VARCHAR(127) NOT NULL, o_auth_version VARCHAR(15) NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, PRIMARY KEY(id));
CREATE TABLE kl_user_user_group (user_id BIGINT NOT NULL, group_id BIGINT NOT NULL, created_at TIMESTAMP NOT NULL, updated_at TIMESTAMP NOT NULL, created_by BIGINT NOT NULL, updated_by BIGINT NOT NULL, PRIMARY KEY(user_id, group_id));
CREATE UNIQUE INDEX fx_shop_filter_sortable ON fx_shop_filter (position, level, parent_id, root_id);
CREATE UNIQUE INDEX fx_shop_filter_sluggable ON fx_shop_filter (slug);
CREATE UNIQUE INDEX fx_shop_filter_group_sortable ON fx_shop_filter_group (position);
CREATE UNIQUE INDEX fx_shop_filter_order_sortable ON fx_shop_filter_order (position);
CREATE UNIQUE INDEX fx_shop_item_sortable ON fx_shop_item (position, level, parent_id, root_id);
CREATE UNIQUE INDEX fx_shop_item_sluggable ON fx_shop_item (slug);
CREATE UNIQUE INDEX fx_shop_list_sortable ON fx_shop_list (position, level, parent_id, root_id);
CREATE UNIQUE INDEX fx_shop_list_sluggable ON fx_shop_list (slug);
CREATE INDEX j_commentable_record_search_index ON j_commentable_record (component_id, record_id, sender_id, is_active, is_published);
CREATE INDEX j_commentable_record_published_index ON j_commentable_record (component_id, is_published);
CREATE INDEX j_commentable_record_active_index ON j_commentable_record (component_id, is_active);
CREATE UNIQUE INDEX j_element_sortable ON j_element (position, level, parent_id, root_id);
CREATE UNIQUE INDEX j_element_sluggable ON j_element (slug);
CREATE INDEX j_file_typeof ON j_file (typeof);
CREATE INDEX parameterable_date_values_search_index ON j_parameterable_date_value (component_id, object_id, parameter_id, value);
CREATE INDEX j_parameterable_date_value_sortable ON j_parameterable_date_value (position);
CREATE INDEX parameterable_decimal_values_search_index ON j_parameterable_decimal_value (component_id, object_id, parameter_id, value);
CREATE INDEX j_parameterable_decimal_value_sortable ON j_parameterable_decimal_value (position);
CREATE INDEX parameterable_integer_values_search_index ON j_parameterable_integer_value (component_id, object_id, parameter_id, value);
CREATE INDEX j_parameterable_integer_value_sortable ON j_parameterable_integer_value (position);
CREATE UNIQUE INDEX parameterable_option_uniq_cols ON j_parameterable_option (parameter_id, name);
CREATE UNIQUE INDEX parameterable_schema_uniq_cols ON j_parameterable_schema (component_id, name);
CREATE UNIQUE INDEX j_parameterable_schema_sortable ON j_parameterable_schema (position, level, parent_id, component_id);
CREATE INDEX parameterable_string_values_search_index ON j_parameterable_string_value (component_id, object_id, parameter_id);
CREATE INDEX j_parameterable_string_value_sortable ON j_parameterable_string_value (position);
CREATE INDEX parameterable_time_values_search_index ON j_parameterable_time_value (component_id, object_id, parameter_id, value);
CREATE INDEX j_parameterable_time_value_sortable ON j_parameterable_time_value (position);
CREATE INDEX parameterable_timestamp_values_search_index ON j_parameterable_timestamp_value (component_id, object_id, parameter_id, value);
CREATE INDEX j_parameterable_timestamp_value_sortable ON j_parameterable_timestamp_value (position);
CREATE INDEX j_rateable_record_value_index ON j_rateable_record (component_id, value);
CREATE INDEX j_restrictable_record_search_index ON j_restrictable_record (component_id, record_id, is_expired);
CREATE INDEX j_restrictable_record_expired_index ON j_restrictable_record (component_id, is_expired);
CREATE INDEX j_reviewable_record_search_index ON j_reviewable_record (component_id, record_id, sender_id, is_active, is_positive, is_published);
CREATE INDEX j_reviewable_record_published_index ON j_reviewable_record (component_id, is_published, is_positive);
CREATE INDEX j_reviewable_record_active_index ON j_reviewable_record (component_id, is_active, is_positive);
CREATE UNIQUE INDEX ix_class_mathod_uniq ON kl_event_subscriber (method, class);
CREATE UNIQUE INDEX kl_layout_script_sortable ON kl_layout_script (position, level, parent_id, root_id);
CREATE UNIQUE INDEX kl_layout_style_sortable ON kl_layout_style (position);
CREATE INDEX is_active_admin_idx ON kl_user (is_active, is_super_admin);
ALTER TABLE fx_shop_filter_group ADD CONSTRAINT fx_shop_filter_group_parameter_id_j_parameterable_schema_id FOREIGN KEY (parameter_id) REFERENCES j_parameterable_schema(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fx_shop_filter_group ADD CONSTRAINT fx_shop_filter_group_filter_id_fx_shop_filter_id FOREIGN KEY (filter_id) REFERENCES fx_shop_filter(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fx_shop_filter_group ADD CONSTRAINT fx_shop_filter_group_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fx_shop_filter_having ADD CONSTRAINT fx_shop_filter_having_parameter_id_j_parameterable_schema_id FOREIGN KEY (parameter_id) REFERENCES j_parameterable_schema(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fx_shop_filter_having ADD CONSTRAINT fx_shop_filter_having_filter_id_fx_shop_filter_id FOREIGN KEY (filter_id) REFERENCES fx_shop_filter(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fx_shop_filter_having ADD CONSTRAINT fx_shop_filter_having_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fx_shop_filter_order ADD CONSTRAINT fx_shop_filter_order_parameter_id_j_parameterable_schema_id FOREIGN KEY (parameter_id) REFERENCES j_parameterable_schema(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fx_shop_filter_order ADD CONSTRAINT fx_shop_filter_order_filter_id_fx_shop_filter_id FOREIGN KEY (filter_id) REFERENCES fx_shop_filter(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fx_shop_filter_order ADD CONSTRAINT fx_shop_filter_order_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fx_shop_filter_rule ADD CONSTRAINT fx_shop_filter_rule_parameter_id_j_parameterable_schema_id FOREIGN KEY (parameter_id) REFERENCES j_parameterable_schema(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fx_shop_filter_rule ADD CONSTRAINT fx_shop_filter_rule_filter_id_fx_shop_filter_id FOREIGN KEY (filter_id) REFERENCES fx_shop_filter(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE fx_shop_filter_rule ADD CONSTRAINT fx_shop_filter_rule_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE items_words_ref ADD CONSTRAINT items_words_ref_word_id_word_template_id FOREIGN KEY (word_id) REFERENCES word_template(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE items_words_ref ADD CONSTRAINT items_words_ref_product_id_fx_shop_item_id FOREIGN KEY (product_id) REFERENCES fx_shop_item(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_commentable_record ADD CONSTRAINT j_commentable_record_sender_id_kl_user_id FOREIGN KEY (sender_id) REFERENCES kl_user(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_element ADD CONSTRAINT j_element_updated_by_kl_user_id FOREIGN KEY (updated_by) REFERENCES kl_user(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_element ADD CONSTRAINT j_element_created_by_kl_user_id FOREIGN KEY (created_by) REFERENCES kl_user(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_file_attachment ADD CONSTRAINT j_file_attachment_file_id_j_file_id FOREIGN KEY (file_id) REFERENCES j_file(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_file_attachment ADD CONSTRAINT j_file_attachment_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE CASCADE ON DELETE RESTRICT NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_file_mime_type_group_ref ADD CONSTRAINT j_file_mime_type_group_ref_type_id_j_file_mime_type_id FOREIGN KEY (type_id) REFERENCES j_file_mime_type(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_file_mime_type_group_ref ADD CONSTRAINT j_file_mime_type_group_ref_group_id_j_file_mime_type_group_id FOREIGN KEY (group_id) REFERENCES j_file_mime_type_group(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_ignoreable_record ADD CONSTRAINT j_ignoreable_record_ignored_component_id_j_behavior_component_id FOREIGN KEY (ignored_component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_ignoreable_record ADD CONSTRAINT j_ignoreable_record_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_joined_record ADD CONSTRAINT j_joined_record_response_component_id_j_behavior_component_id FOREIGN KEY (response_component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_joined_record ADD CONSTRAINT j_joined_record_request_component_id_j_behavior_component_id FOREIGN KEY (request_component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_date_value ADD CONSTRAINT jpji FOREIGN KEY (parameter_id) REFERENCES j_parameterable_schema(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_date_value ADD CONSTRAINT j_parameterable_date_value_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_decimal_value ADD CONSTRAINT jpji_1 FOREIGN KEY (parameter_id) REFERENCES j_parameterable_schema(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_decimal_value ADD CONSTRAINT jcji FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_integer_value ADD CONSTRAINT jpji_2 FOREIGN KEY (parameter_id) REFERENCES j_parameterable_schema(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_integer_value ADD CONSTRAINT jcji_1 FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_option_translation ADD CONSTRAINT j_parameterable_option_translation_id_j_parameterable_option_id FOREIGN KEY (id) REFERENCES j_parameterable_option(id) ON UPDATE CASCADE ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_option ADD CONSTRAINT j_parameterable_option_parameter_id_j_parameterable_schema_id FOREIGN KEY (parameter_id) REFERENCES j_parameterable_schema(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_schema_translation ADD CONSTRAINT j_parameterable_schema_translation_id_j_parameterable_schema_id FOREIGN KEY (id) REFERENCES j_parameterable_schema(id) ON UPDATE CASCADE ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_schema ADD CONSTRAINT j_parameterable_schema_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_string_value_translation ADD CONSTRAINT jiji_1 FOREIGN KEY (id) REFERENCES j_parameterable_string_value(id) ON UPDATE CASCADE ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_string_value ADD CONSTRAINT jpji_3 FOREIGN KEY (parameter_id) REFERENCES j_parameterable_schema(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_string_value ADD CONSTRAINT jcji_2 FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_time_value ADD CONSTRAINT jpji_4 FOREIGN KEY (parameter_id) REFERENCES j_parameterable_schema(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_time_value ADD CONSTRAINT j_parameterable_time_value_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_timestamp_value ADD CONSTRAINT jpji_5 FOREIGN KEY (parameter_id) REFERENCES j_parameterable_schema(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_parameterable_timestamp_value ADD CONSTRAINT jcji_3 FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_rateable_record ADD CONSTRAINT j_rateable_record_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_restrictable_record_reasons ADD CONSTRAINT jrji FOREIGN KEY (restrict_id) REFERENCES j_restrictable_record(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_restrictable_record_reasons ADD CONSTRAINT j_restrictable_record_reasons_reason_id_j_restrictable_reason_id FOREIGN KEY (reason_id) REFERENCES j_restrictable_reason(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_reviewable_record ADD CONSTRAINT j_reviewable_record_sender_id_kl_user_id FOREIGN KEY (sender_id) REFERENCES kl_user(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_reviewable_record ADD CONSTRAINT j_reviewable_record_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_signable_record ADD CONSTRAINT j_signable_record_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_taggable_record ADD CONSTRAINT j_taggable_record_tag_id_j_taggable_tag_id FOREIGN KEY (tag_id) REFERENCES j_taggable_tag(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_watchable_record ADD CONSTRAINT j_watchable_record_watched_component_id_j_behavior_component_id FOREIGN KEY (watched_component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_watchable_record ADD CONSTRAINT j_watchable_record_component_id_j_behavior_component_id FOREIGN KEY (component_id) REFERENCES j_behavior_component(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE j_watchdogable_revisions ADD CONSTRAINT j_watchdogable_revisions_updater_id_kl_user_id FOREIGN KEY (updater_id) REFERENCES kl_user(id) ON UPDATE RESTRICT ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_event_subscribers ADD CONSTRAINT kl_event_subscribers_subscriber_id_kl_event_subscriber_id FOREIGN KEY (subscriber_id) REFERENCES kl_event_subscriber(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_event_subscribers ADD CONSTRAINT kl_event_subscribers_event_id_kl_event_id FOREIGN KEY (event_id) REFERENCES kl_event(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_layout_scripts ADD CONSTRAINT kl_layout_scripts_script_id_kl_layout_script_id FOREIGN KEY (script_id) REFERENCES kl_layout_script(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_layout_scripts ADD CONSTRAINT kl_layout_scripts_layout_id_kl_layout_id FOREIGN KEY (layout_id) REFERENCES kl_layout(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_layout_styles ADD CONSTRAINT kl_layout_styles_style_id_kl_layout_style_id FOREIGN KEY (style_id) REFERENCES kl_layout_style(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_layout_styles ADD CONSTRAINT kl_layout_styles_layout_id_kl_layout_id FOREIGN KEY (layout_id) REFERENCES kl_layout(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_user_activate_key ADD CONSTRAINT kl_user_activate_key_user_id_kl_user_id FOREIGN KEY (user_id) REFERENCES kl_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_user_group_permission ADD CONSTRAINT kl_user_group_permission_permission_id_kl_permission_id FOREIGN KEY (permission_id) REFERENCES kl_permission(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_user_group_permission ADD CONSTRAINT kl_user_group_permission_group_id_kl_user_group_id FOREIGN KEY (group_id) REFERENCES kl_user_group(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_user_password_key ADD CONSTRAINT kl_user_password_key_user_id_kl_user_id FOREIGN KEY (user_id) REFERENCES kl_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_user_permission ADD CONSTRAINT kl_user_permission_user_id_kl_user_id FOREIGN KEY (user_id) REFERENCES kl_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_user_permission ADD CONSTRAINT kl_user_permission_permission_id_kl_permission_id FOREIGN KEY (permission_id) REFERENCES kl_permission(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_user_remember_key ADD CONSTRAINT kl_user_remember_key_user_id_kl_user_id FOREIGN KEY (user_id) REFERENCES kl_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_user_token ADD CONSTRAINT kl_user_token_user_id_kl_user_id FOREIGN KEY (user_id) REFERENCES kl_user(id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_user_user_group ADD CONSTRAINT kl_user_user_group_user_id_kl_user_id FOREIGN KEY (user_id) REFERENCES kl_user(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE kl_user_user_group ADD CONSTRAINT kl_user_user_group_group_id_kl_user_group_id FOREIGN KEY (group_id) REFERENCES kl_user_group(id) ON DELETE CASCADE NOT DEFERRABLE INITIALLY IMMEDIATE;
